# 虚拟宠物系统 (Virtual Pet System)

一个为 SillyTavern 设计的虚拟宠物插件，通过悬浮窗界面让你可以养育和照顾自己的虚拟宠物。

## ✨ 功能特色

### 🐾 宠物系统
- **多种宠物类型**: 猫咪、小狗、龙、兔子、小鸟等
- **宠物状态管理**: 健康、快乐、饥饿、精力四大属性
- **等级系统**: 通过互动获得经验值，宠物会升级成长
- **实时状态更新**: 宠物状态会随时间自然变化

### 🎮 互动功能
- **喂食**: 增加宠物的饥饿值和快乐度
- **玩耍**: 提升快乐度，消耗精力，获得更多经验
- **休息**: 恢复精力和健康值
- **撒娇卖萌**: 15分钟不理宠物会自动撒娇求关注，带动画效果！
- **AI智能撒娇**: 可自定义宠物人设，调用SillyTavern API生成个性化撒娇内容
- **AI智能互动**: 喂食、玩耍、休息、升级等所有互动都有AI生成的个性化回应
- **冷却机制**: 防止过度互动，让养宠更有节奏感

### 🏆 成就系统
- **初次喂食**: 第一次喂食宠物
- **游戏达人**: 经常和宠物玩耍并达到一定等级
- **升级专家**: 宠物达到高等级

### 📱 响应式设计
- **悬浮窗界面**: 可拖拽的浮动按钮，不影响主界面使用
- **移动端适配**: 完美支持触摸操作和各种屏幕尺寸
- **现代化UI**: 与SillyTavern风格保持一致的界面设计

## 🚀 安装方法

### 方法一：通过SillyTavern扩展管理器安装（推荐）

1. 打开 SillyTavern，点击右上角的 **扩展** 图标 (🎲)
2. 在扩展页面中，点击 **下载扩展/更新** 按钮
3. 将以下仓库链接粘贴到输入框内：
   ```
   https://github.com/your-username/sillytavern-virtual-pet
   ```
4. 点击 `Download` 进行安装
5. 安装完成后，重新加载UI
6. 在扩展列表中找到并启用 "虚拟宠物系统"

### 方法二：手动安装

1. 下载本项目的所有文件
2. 将文件夹复制到 SillyTavern 的扩展目录：
   ```
   SillyTavern/public/scripts/extensions/third-party/virtual-pet-system/
   ```
3. 重启 SillyTavern
4. 在扩展设置中启用插件

## 📖 使用说明

### 基本操作

1. **启用插件**: 在扩展设置中勾选"启用虚拟宠物系统"
2. **配置AI功能**: 在设置界面中启用AI撒娇和AI互动功能
3. **自定义人设**: 在设置界面编写宠物的个性化人设描述
4. **打开界面**: 点击屏幕上出现的🐾浮动按钮
5. **照顾宠物**: 使用喂食、玩耍、休息按钮与宠物互动
6. **查看详情**: 点击"详细信息"查看宠物的详细状态和成就
7. **享受AI互动**: 每次互动都会收到个性化的AI回应

### 宠物状态说明

- **健康 (Health)**: 宠物的整体健康状况，过度饥饿或疲劳会降低健康
- **快乐 (Happiness)**: 宠物的心情，通过喂食和玩耍可以提升
- **饥饿 (Hunger)**: 宠物的饱食程度，需要定期喂食维持
- **精力 (Energy)**: 宠物的体力，玩耍会消耗，休息可以恢复

### 互动冷却时间

- **喂食**: 30秒冷却
- **玩耍**: 1分钟冷却  
- **休息**: 2分钟冷却

## ⚙️ 配置选项

在扩展设置页面可以配置：

- **启用/禁用插件**: 控制插件的整体开关
- **宠物名称**: 自定义你的宠物名字
- **宠物类型**: 选择不同的宠物外观
- **自动保存**: 自动保存宠物状态（默认开启）
- **通知提醒**: 启用状态变化通知（默认开启）

## 🔧 技术特性

- **数据持久化**: 宠物数据自动保存到浏览器本地存储
- **实时更新**: 宠物状态会根据时间流逝自动更新
- **响应式设计**: 适配各种设备和屏幕尺寸
- **触摸友好**: 完美支持移动设备的触摸操作
- **性能优化**: 轻量级设计，不影响SillyTavern性能

## 🗑️ 卸载插件

如果需要完全卸载插件，请参考 [完整卸载指南](UNINSTALL.md)。

**快速卸载**：
1. 在浏览器控制台运行：`uninstallVirtualPetSystem()`
2. 删除插件文件夹：`scripts/extensions/third-party/virtual-pet-system/`
3. 重启SillyTavern

## 🐛 问题反馈

如果遇到问题或有功能建议，请：

1. 检查浏览器控制台是否有错误信息
2. 确认SillyTavern版本兼容性
3. 尝试禁用其他扩展排查冲突
4. 查看 [卸载指南](UNINSTALL.md) 解决残留数据问题
5. 在GitHub Issues中提交问题报告

## 📚 详细文档

- 📖 [完整卸载指南](UNINSTALL.md) - 解决卸载残留问题
- 😽 [撒娇卖萌功能](ATTENTION_SEEKING_FEATURE.md) - 详细的撒娇功能说明
- 🤖 [AI智能撒娇功能](AI_ATTENTION_FEATURE.md) - 自定义人设和AI生成撒娇内容
- 🎮 [AI智能互动功能](AI_INTERACTIONS_FEATURE.md) - 所有互动的AI个性化回应
- 🎛️ [设置界面使用指南](SETTINGS_UI_GUIDE.md) - 图形化设置界面详细说明
- 🚀 [AI功能快速开始](AI_QUICK_START.md) - 5分钟上手AI功能
- 🔧 [AI功能故障排除](AI_TROUBLESHOOTING.md) - 解决AI功能问题的完整指南
- 🧪 [测试指南](TESTING.md) - 功能测试和故障排除

## 📝 更新日志

### v1.5.0 (2024-12-29)
- 🔧 合并AI功能开关 - 将AI撒娇和AI互动合并为统一的"AI功能"开关，简化设置
- 🎨 简化主页UI - 移除顶部"虚拟宠物"文字，界面更加简洁美观
- 🛠️ 完善故障排除 - 新增AI功能诊断工具和详细的故障排除指南
- 🔄 向后兼容 - 保持旧的API函数兼容性，平滑升级体验
- 📚 更新文档 - 同步更新所有相关文档和使用指南

### v1.4.0 (2024-12-29)
- 🎛️ 新增图形化设置界面 - 无需控制台命令，通过友好的UI管理所有AI和人设功能
- 🎭 可视化人设编辑器 - 在设置界面直接编写、保存、测试宠物人设
- 🔄 智能同步机制 - 修改宠物名字或类型时自动更新相关人设内容
- 🧪 一键测试功能 - 设置界面集成AI功能测试按钮，方便验证效果
- 📝 完善的设置指南 - 详细的设置界面使用文档和最佳实践

### v1.3.0 (2024-12-29)
- 🎮 新增AI智能互动功能 - 喂食、玩耍、休息、升级等所有互动都有AI生成的个性化回应
- 🎭 全方位AI体验 - 每次互动都根据宠物人设生成独特内容，让宠物真正"活"起来
- 👋 智能问候系统 - 打开界面时宠物会用AI生成的个性化消息问候
- 🎉 AI升级庆祝 - 宠物升级时的兴奋表达更加生动有趣
- 🧪 完善测试工具 - 支持测试所有AI互动类型，便于调试和体验

### v1.2.0 (2024-12-29)
- 🤖 新增AI智能撒娇功能 - 可自定义宠物人设，调用SillyTavern API生成个性化撒娇内容
- 🎭 人设系统 - 支持完全自定义宠物性格、说话风格、行为特点
- 🔄 智能回退机制 - API失败时自动使用默认撒娇消息
- 🛠️ 丰富的管理工具 - 人设编辑、功能测试、状态检查等
- 📚 详细文档 - 完整的AI撒娇功能使用指南

### v1.1.0 (2024-12-29)
- 😽 新增撒娇卖萌功能 - 15分钟不理宠物会自动撒娇求关注
- 🎨 添加丰富的动画效果 - 弹跳、摇摆、脉冲、摆动等
- 🎭 个性化撒娇消息 - 根据宠物类型显示不同消息
- 🔧 完善卸载清理机制 - 彻底解决残留数据问题
- 🧪 新增测试工具 - 方便测试和调试功能

### v1.0.0 (2024-12-27)
- 🎉 首次发布
- ✨ 基础宠物系统实现
- 🎮 互动功能（喂食、玩耍、休息）
- 📊 等级和经验系统
- 🏆 成就系统
- 📱 移动端适配
- ⚙️ 设置和个性化选项

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🙏 致谢

- 感谢 SillyTavern 团队提供优秀的平台
- 参考了 preset-manager-momo 的悬浮窗设计
- 感谢所有测试用户的反馈和建议
